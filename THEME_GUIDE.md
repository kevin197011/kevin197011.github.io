# 🎨 主题切换功能指南

## 功能概述

KkWiki 现在支持暗色主题和亮色主题的无缝切换，提供更好的用户体验和可访问性。

## 主要特性

### 🌙 暗色主题 (默认)
- 深色背景，减少眼部疲劳
- 绿色 (#00ff88) 和蓝色 (#00d4ff) 强调色
- 适合长时间阅读和编程

### ☀️ 亮色主题
- 明亮背景，提供更好的打印体验
- 绿色 (#059669) 和蓝色 (#0284c7) 强调色
- 适合白天使用和正式文档阅读

## 如何切换主题

### 方法1：点击侧边栏按钮
1. 在左侧边栏找到主题切换按钮
2. 点击按钮即可在暗色/亮色主题间切换
3. 按钮图标会相应变化（月亮🌙/太阳☀️）

### 方法2：键盘快捷键
- `Ctrl/Cmd + Shift + T` - 标准主题切换快捷键
- `Alt + T` - 快速主题切换

## 智能功能

### 🔄 主题记忆
- 自动保存用户的主题偏好到本地存储
- 下次访问时自动恢复上次选择的主题

### 🖥️ 系统主题跟随
- 首次访问时，如果没有保存的偏好，会检测系统主题设置
- 仅在用户未手动设置时跟随系统主题变化

### 🔔 切换提示
- 主题切换时显示美观的Toast通知
- 包含主题图标和确认消息

### ✨ 平滑过渡
- 所有颜色变化都有流畅的过渡动画
- 切换过程中临时禁用交互，避免闪烁

## 技术实现

### CSS变量系统
```css
/* 暗色主题 */
:root {
    --bg-primary: #0a0b0e;
    --text-primary: #e2e8f0;
    --accent-green: #00ff88;
    /* ... */
}

/* 亮色主题 */
html.light {
    --bg-primary: #ffffff;
    --text-primary: #1e293b;
    --accent-green: #059669;
    /* ... */
}
```

### JavaScript API
```javascript
// 切换主题
cyberUI.toggleTheme();

// 直接设置主题
cyberUI.setTheme('light'); // 或 'dark'

// 获取当前主题
const currentTheme = cyberUI.getCurrentTheme();
```

## 测试页面

访问 `/test_theme.html` 可以查看完整的主题切换演示，包括：
- 所有颜色变量的实时预览
- 交互式主题切换按钮
- 键盘快捷键测试
- Toast通知演示

## 浏览器兼容性

- ✅ Chrome 88+
- ✅ Firefox 85+
- ✅ Safari 14+
- ✅ Edge 88+

## 最佳实践

1. **主题设计一致性**：所有颜色都通过CSS变量管理，确保主题切换时的一致性
2. **用户体验优先**：记住用户偏好，减少重复设置
3. **性能优化**：使用CSS变量和硬件加速的过渡动画
4. **可访问性**：两个主题都经过对比度测试，确保文字可读性

## 开发者注意事项

在添加新的UI组件时，请使用CSS变量而不是硬编码颜色：

```css
/* ✅ 正确 */
.my-component {
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
}

/* ❌ 错误 */
.my-component {
    background: #161921;
    color: #e2e8f0;
    border: 1px solid #334155;
}
```

这样可以确保新组件在主题切换时能够正确响应颜色变化。