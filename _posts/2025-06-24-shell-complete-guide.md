---
layout: post
title: "Shell ÂÆåÂÖ®ÊåáÂçóÔºö‰ªéÂÖ•Èó®Âà∞Á≤æÈÄö"
date: 2025-06-24 20:00:00 +0800
category: DevOps
tags: [Shell, Bash, Linux, ËøêÁª¥, Ëá™Âä®Âåñ, DevOps, ËÑöÊú¨ÁºñÁ®ã]
author: Kk
excerpt: "ÂÖ®Èù¢ÊéåÊè°ShellËÑöÊú¨ÁºñÁ®ãÔºå‰ªéÂü∫Á°ÄËØ≠Ê≥ïÂà∞È´òÁ∫ßÊäÄÂ∑ßÔºåÊèêÂçáLinuxËøêÁª¥ÂíåËá™Âä®ÂåñËÉΩÂäõ"
diagram: |
  graph TB
      subgraph "ShellÁîüÊÄÅÁ≥ªÁªü"
          subgraph "ShellÁ±ªÂûã"
              BASH[Bash Shell]
              ZSH[Zsh Shell]
              FISH[Fish Shell]
              DASH[Dash Shell]
              KSH[Korn Shell]
              CSH[C Shell]
          end

          subgraph "Âü∫Á°ÄÊ¶ÇÂøµ"
              TERMINAL[ÁªàÁ´ØÊ®°ÊãüÂô®]
              SHELL_ENV[ShellÁéØÂ¢É]
              PROCESS[ËøõÁ®ãÁÆ°ÁêÜ]
              VARIABLES[ÂèòÈáèÁ≥ªÁªü]
              PIPES[ÁÆ°ÈÅìÈÄö‰ø°]
              REDIRECTION[ÈáçÂÆöÂêë]
          end

          subgraph "ËÑöÊú¨ÁºñÁ®ã"
              SYNTAX[ËØ≠Ê≥ïÂü∫Á°Ä]
              FUNCTIONS[ÂáΩÊï∞ÂÆö‰πâ]
              CONDITIONALS[Êù°‰ª∂ËØ≠Âè•]
              LOOPS[Âæ™ÁéØÁªìÊûÑ]
              ARRAYS[Êï∞ÁªÑÂ§ÑÁêÜ]
              REGEX[Ê≠£ÂàôË°®ËææÂºè]
          end

          subgraph "Á≥ªÁªü‰∫§‰∫í"
              FILE_OPS[Êñá‰ª∂Êìç‰Ωú]
              PERMISSIONS[ÊùÉÈôêÁÆ°ÁêÜ]
              SYSTEM_INFO[Á≥ªÁªü‰ø°ÊÅØ]
              NETWORK[ÁΩëÁªúÂ∑•ÂÖ∑]
              SERVICE_MGMT[ÊúçÂä°ÁÆ°ÁêÜ]
              CRON[ÂÆöÊó∂‰ªªÂä°]
          end

          subgraph "È´òÁ∫ßÁâπÊÄß"
              SIGNAL_HANDLING[‰ø°Âè∑Â§ÑÁêÜ]
              JOB_CONTROL[‰Ωú‰∏öÊéßÂà∂]
              PARAMETER_EXPANSION[ÂèÇÊï∞Êâ©Â±ï]
              COMMAND_SUBSTITUTION[ÂëΩ‰ª§ÊõøÊç¢]
              ARITHMETIC[ÁÆóÊúØËøêÁÆó]
              DEBUGGING[Ë∞ÉËØïÊäÄÂ∑ß]
          end

          subgraph "ÂÆûÁî®Â∑•ÂÖ∑"
              TEXT_PROCESSING[ÊñáÊú¨Â§ÑÁêÜ]
              AWK[AWKÁºñÁ®ã]
              SED[SEDÁºñËæëÂô®]
              GREP[GREPÊêúÁ¥¢]
              FIND[Êñá‰ª∂Êü•Êâæ]
              SORT[ÊéíÂ∫èÂ∑•ÂÖ∑]
          end

          subgraph "Ëá™Âä®ÂåñÂ∫îÁî®"
              DEPLOYMENT[ÈÉ®ÁΩ≤ËÑöÊú¨]
              MONITORING[ÁõëÊéßËÑöÊú¨]
              BACKUP[Â§á‰ªΩËÑöÊú¨]
              LOG_ANALYSIS[Êó•ÂøóÂàÜÊûê]
              CI_CD[CI/CDÈõÜÊàê]
              INFRASTRUCTURE[Âü∫Á°ÄËÆæÊñΩÁÆ°ÁêÜ]
          end
      end

      TERMINAL --> SHELL_ENV
      SHELL_ENV --> BASH
      BASH --> SYNTAX
      SYNTAX --> FUNCTIONS
      SYNTAX --> CONDITIONALS
      SYNTAX --> LOOPS

      VARIABLES --> PARAMETER_EXPANSION
      PIPES --> COMMAND_SUBSTITUTION
      REDIRECTION --> FILE_OPS

      FUNCTIONS --> DEPLOYMENT
      CONDITIONALS --> MONITORING
      LOOPS --> BACKUP

      TEXT_PROCESSING --> AWK
      TEXT_PROCESSING --> SED
      TEXT_PROCESSING --> GREP
      GREP --> LOG_ANALYSIS

      SYSTEM_INFO --> MONITORING
      SERVICE_MGMT --> DEPLOYMENT
      CRON --> AUTOMATION

      DEBUGGING --> CI_CD
      PARAMETER_EXPANSION --> INFRASTRUCTURE

      style BASH fill:#4eaa25,stroke:#fff,stroke-width:2px,color:#fff
      style TERMINAL fill:#2e3440,stroke:#fff,stroke-width:2px,color:#fff
      style SYNTAX fill:#88c999,stroke:#fff,stroke-width:2px,color:#000
      style TEXT_PROCESSING fill:#d08770,stroke:#fff,stroke-width:2px,color:#fff
      style AUTOMATION fill:#5e81ac,stroke:#fff,stroke-width:2px,color:#fff
      style AWK fill:#bf616a,stroke:#fff,stroke-width:2px,color:#fff
      style SED fill:#ebcb8b,stroke:#fff,stroke-width:2px,color:#000
      style GREP fill:#a3be8c,stroke:#fff,stroke-width:2px,color:#000
---

# Shell ÂÆåÂÖ®ÊåáÂçóÔºö‰ªéÂÖ•Èó®Âà∞Á≤æÈÄö

## üöÄ ‰ªÄ‰πàÊòØ Shell

Shell ÊòØÁî®Êà∑‰∏éÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏‰πãÈó¥ÁöÑÊé•Âè£ÔºåÂÆÉÊó¢ÊòØÂëΩ‰ª§Ëß£ÈáäÂô®Ôºå‰πüÊòØ‰∏ÄÁßçÂº∫Â§ßÁöÑÁºñÁ®ãËØ≠Ë®Ä„ÄÇÈÄöËøá ShellÔºåÊàë‰ª¨ÂèØ‰ª•ÊâßË°åÁ≥ªÁªüÂëΩ‰ª§„ÄÅÁºñÂÜôËá™Âä®ÂåñËÑöÊú¨ÔºåÂÆûÁé∞Â§çÊùÇÁöÑÁ≥ªÁªüÁÆ°ÁêÜ‰ªªÂä°„ÄÇ

### Ê†∏ÂøÉÁâπÁÇπ

- **üñ•Ô∏è ÂëΩ‰ª§Ë°åÁïåÈù¢**: Êèê‰æõÂº∫Â§ßÁöÑÂëΩ‰ª§Ë°å‰∫§‰∫íÁéØÂ¢É
- **üìú ËÑöÊú¨ÁºñÁ®ã**: ÊîØÊåÅÂ§çÊùÇÁöÑËÑöÊú¨ÁºñÁ®ãÈÄªËæë
- **üîß Á≥ªÁªüÁÆ°ÁêÜ**: Ê∑±Â∫¶ÈõÜÊàêÁ≥ªÁªüÂäüËÉΩ
- **‚ö° È´òÊïàËá™Âä®Âåñ**: Âø´ÈÄüÂÆûÁé∞‰ªªÂä°Ëá™Âä®Âåñ
- **üåê Ë∑®Âπ≥Âè∞**: ÂπøÊ≥õÊîØÊåÅÂêÑÁßç Unix-like Á≥ªÁªü

## üì¶ Shell ÁéØÂ¢ÉÊê≠Âª∫

### Êü•ÁúãÂΩìÂâç Shell

```bash
# Êü•ÁúãÂΩìÂâç‰ΩøÁî®ÁöÑ Shell
echo $SHELL

# Êü•ÁúãÁ≥ªÁªüÂèØÁî®ÁöÑ Shell
cat /etc/shells

# Êü•Áúã Shell ÁâàÊú¨
bash --version
```

### ÂàáÊç¢ Shell

```bash
# ‰∏¥Êó∂ÂàáÊç¢Âà∞ zsh
exec zsh

# Ê∞∏‰πÖÂàáÊç¢ Shell
chsh -s /bin/zsh

# ÂàáÊç¢Âõû bash
chsh -s /bin/bash
```

### ÈÖçÁΩÆÊñá‰ª∂

```bash
# Bash ÈÖçÁΩÆÊñá‰ª∂
~/.bashrc          # ‰∫§‰∫íÂºèÈùûÁôªÂΩï shell
~/.bash_profile    # ÁôªÂΩï shell
~/.bash_aliases    # Âà´ÂêçÂÆö‰πâ
~/.bash_logout     # ÁôªÂá∫Êó∂ÊâßË°å

# Á≥ªÁªüÁ∫ßÈÖçÁΩÆ
/etc/bashrc        # Á≥ªÁªüËåÉÂõ¥ÁöÑ bashrc
/etc/profile       # Á≥ªÁªüËåÉÂõ¥ÁöÑ profile
```

## üéØ Âü∫Á°ÄËØ≠Ê≥ï

### 1. ÂèòÈáèÂíåÁéØÂ¢ÉÂèòÈáè

```bash
#!/bin/bash

# ÂÆö‰πâÂèòÈáèÔºàÊ≥®ÊÑèÁ≠âÂè∑‰∏§Ëæπ‰∏çËÉΩÊúâÁ©∫Ê†ºÔºâ
name="Shell Tutorial"
number=42
readonly PI=3.14159

# ‰ΩøÁî®ÂèòÈáè
echo "Welcome to $name"
echo "Number is: $number"
echo "PI value: $PI"

# ÁéØÂ¢ÉÂèòÈáè
export PATH="/custom/path:$PATH"
export DATABASE_URL="postgresql://localhost:5432/mydb"

# Êü•ÁúãÊâÄÊúâÁéØÂ¢ÉÂèòÈáè
env

# Êü•ÁúãÁâπÂÆöÂèòÈáè
echo $HOME
echo $USER
echo $PWD
```

### 2. ÁâπÊÆäÂèòÈáè

```bash
#!/bin/bash

# ËÑöÊú¨ÂèÇÊï∞
echo "Script name: $0"
echo "First argument: $1"
echo "Second argument: $2"
echo "All arguments: $@"
echo "Number of arguments: $#"

# ËøõÁ®ãÁõ∏ÂÖ≥
echo "Current PID: $$"
echo "Last command exit status: $?"
echo "Last background process PID: $!"

# Á§∫‰æãËÑöÊú¨Ë∞ÉÁî®Ôºö./script.sh arg1 arg2
```

### 3. Â≠óÁ¨¶‰∏≤Êìç‰Ωú

```bash
#!/bin/bash

text="Hello World"

# Â≠óÁ¨¶‰∏≤ÈïøÂ∫¶
echo "Length: ${#text}"

# Â≠óÁ¨¶‰∏≤Êà™Âèñ
echo "Substring: ${text:0:5}"        # ËæìÂá∫: Hello
echo "Substring: ${text:6}"          # ËæìÂá∫: World

# Â≠óÁ¨¶‰∏≤ÊõøÊç¢
echo "Replace: ${text/World/Shell}"  # ËæìÂá∫: Hello Shell
echo "Replace all: ${text//l/L}"     # ËæìÂá∫: HeLLo WorLd

# Â≠óÁ¨¶‰∏≤Âà†Èô§
echo "Remove prefix: ${text#Hello }" # ËæìÂá∫: World
echo "Remove suffix: ${text% World}" # ËæìÂá∫: Hello

# Â§ßÂ∞èÂÜôËΩ¨Êç¢
echo "Uppercase: ${text^^}"          # ËæìÂá∫: HELLO WORLD
echo "Lowercase: ${text,,}"          # ËæìÂá∫: hello world
```

### 4. Êï∞ÁªÑÊìç‰Ωú

```bash
#!/bin/bash

# ÂÆö‰πâÊï∞ÁªÑ
fruits=("apple" "banana" "orange")
numbers=(1 2 3 4 5)

# ËÆøÈóÆÊï∞ÁªÑÂÖÉÁ¥†
echo "First fruit: ${fruits[0]}"
echo "All fruits: ${fruits[@]}"
echo "Array length: ${#fruits[@]}"

# ÈÅçÂéÜÊï∞ÁªÑ
for fruit in "${fruits[@]}"; do
    echo "Fruit: $fruit"
done

# Ê∑ªÂä†ÂÖÉÁ¥†
fruits+=("grape")

# ÂÖ≥ËÅîÊï∞ÁªÑÔºàBash 4.0+Ôºâ
declare -A colors
colors["red"]="#FF0000"
colors["green"]="#00FF00"
colors["blue"]="#0000FF"

echo "Red color: ${colors[red]}"
```

## üîß ÊéßÂà∂ÁªìÊûÑ

### 1. Êù°‰ª∂ËØ≠Âè•

```bash
#!/bin/bash

# if-else ËØ≠Âè•
number=10

if [ $number -gt 5 ]; then
    echo "Number is greater than 5"
elif [ $number -eq 5 ]; then
    echo "Number equals 5"
else
    echo "Number is less than 5"
fi

# Êñá‰ª∂ÊµãËØï
file="/etc/passwd"

if [ -f "$file" ]; then
    echo "File exists"
    if [ -r "$file" ]; then
        echo "File is readable"
    fi
fi

# Â≠óÁ¨¶‰∏≤ÊØîËæÉ
name="admin"

if [ "$name" = "admin" ]; then
    echo "Admin user detected"
fi

# Â§öÊù°‰ª∂Âà§Êñ≠
age=25
status="active"

if [ $age -ge 18 ] && [ "$status" = "active" ]; then
    echo "User is adult and active"
fi
```

### 2. case ËØ≠Âè•

```bash
#!/bin/bash

action=$1

case $action in
    "start")
        echo "Starting service..."
        ;;
    "stop")
        echo "Stopping service..."
        ;;
    "restart")
        echo "Restarting service..."
        ;;
    "status")
        echo "Checking service status..."
        ;;
    *)
        echo "Usage: $0 {start|stop|restart|status}"
        exit 1
        ;;
esac
```

### 3. Âæ™ÁéØÁªìÊûÑ

```bash
#!/bin/bash

# for Âæ™ÁéØ
for i in {1..5}; do
    echo "Iteration: $i"
done

# for Âæ™ÁéØÈÅçÂéÜÊñá‰ª∂
for file in *.txt; do
    if [ -f "$file" ]; then
        echo "Processing: $file"
    fi
done

# while Âæ™ÁéØ
counter=1
while [ $counter -le 5 ]; do
    echo "Counter: $counter"
    ((counter++))
done

# until Âæ™ÁéØ
count=0
until [ $count -gt 3 ]; do
    echo "Count: $count"
    ((count++))
done

# Êó†ÈôêÂæ™ÁéØ
while true; do
    echo "Press Ctrl+C to stop"
    sleep 1
done
```

## üìÅ ÂáΩÊï∞ÂÆö‰πâ

### 1. Âü∫Êú¨ÂáΩÊï∞

```bash
#!/bin/bash

# ÂáΩÊï∞ÂÆö‰πâÊñπÂºè1
function greet() {
    echo "Hello, $1!"
}

# ÂáΩÊï∞ÂÆö‰πâÊñπÂºè2
say_goodbye() {
    local name=$1
    echo "Goodbye, $name!"
}

# Ë∞ÉÁî®ÂáΩÊï∞
greet "World"
say_goodbye "Shell"

# ËøîÂõûÂÄºÂáΩÊï∞
check_file() {
    local filename=$1
    if [ -f "$filename" ]; then
        return 0
    else
        return 1
    fi
}

# ‰ΩøÁî®ËøîÂõûÂÄº
if check_file "/etc/passwd"; then
    echo "File exists"
else
    echo "File not found"
fi
```

### 2. È´òÁ∫ßÂáΩÊï∞ÁâπÊÄß

```bash
#!/bin/bash

# ÈÄíÂΩíÂáΩÊï∞ - ËÆ°ÁÆóÈò∂‰πò
factorial() {
    local n=$1
    if [ $n -le 1 ]; then
        echo 1
    else
        local prev=$(factorial $((n-1)))
        echo $((n * prev))
    fi
}

echo "5! = $(factorial 5)"

# ÂáΩÊï∞ÂèÇÊï∞Â§ÑÁêÜ
process_options() {
    local OPTIND=1
    local verbose=false
    local output_file=""

    while getopts "vo:" opt; do
        case $opt in
            v) verbose=true ;;
            o) output_file="$OPTARG" ;;
            \?) echo "Invalid option: -$OPTARG" >&2; return 1 ;;
        esac
    done

    [ "$verbose" = true ] && echo "Verbose mode enabled"
    [ -n "$output_file" ] && echo "Output file: $output_file"
}

# Ë∞ÉÁî®: process_options -v -o output.txt
```

## üîç ËæìÂÖ•ËæìÂá∫ÈáçÂÆöÂêë

### 1. Âü∫Á°ÄÈáçÂÆöÂêë

```bash
#!/bin/bash

# ËæìÂá∫ÈáçÂÆöÂêë
echo "Hello World" > output.txt          # Ë¶ÜÁõñÂÜôÂÖ•
echo "New line" >> output.txt            # ËøΩÂä†ÂÜôÂÖ•

# ÈîôËØØÈáçÂÆöÂêë
ls /nonexistent 2> error.log            # ÈáçÂÆöÂêëÈîôËØØËæìÂá∫
ls /nonexistent 2>> error.log           # ËøΩÂä†ÈîôËØØËæìÂá∫

# ÂêåÊó∂ÈáçÂÆöÂêëÊ†áÂáÜËæìÂá∫ÂíåÈîôËØØËæìÂá∫
ls /etc /nonexistent > output.log 2>&1  # ÊñπÂºè1
ls /etc /nonexistent &> output.log      # ÊñπÂºè2

# ËæìÂÖ•ÈáçÂÆöÂêë
while read line; do
    echo "Line: $line"
done < input.txt
```

### 2. Here Document

```bash
#!/bin/bash

# Here Document
cat << EOF
This is a multi-line
text block that can contain
variables like $USER
EOF

# Here String
grep "pattern" <<< "search in this string"

# ÁîüÊàêÈÖçÁΩÆÊñá‰ª∂
generate_config() {
    local server_name=$1
    local port=$2

cat << EOF > /etc/nginx/sites-available/$server_name
server {
    listen $port;
    server_name $server_name;
    root /var/www/$server_name;

    location / {
        try_files \$uri \$uri/ =404;
    }
}
EOF
}
```

## üîó ÁÆ°ÈÅìÂíåËøáÊª§Âô®

### 1. ÁÆ°ÈÅìÊìç‰Ωú

```bash
#!/bin/bash

# Âü∫Á°ÄÁÆ°ÈÅì
ps aux | grep nginx | grep -v grep

# Â§öÁ∫ßÁÆ°ÈÅì
cat /var/log/access.log | grep "404" | cut -d' ' -f1 | sort | uniq -c

# ÁªüËÆ°‰ª£Á†ÅË°åÊï∞
find . -name "*.sh" | xargs wc -l | sort -nr

# ÁΩëÁªúÁõëÊéß
netstat -an | grep LISTEN | awk '{print $4}' | cut -d: -f2 | sort -n | uniq
```

### 2. ÂëΩ‰ª§ÊõøÊç¢

```bash
#!/bin/bash

# ‰ΩøÁî® $() ËØ≠Ê≥ïÔºàÊé®ËçêÔºâ
current_date=$(date +%Y-%m-%d)
echo "Today is: $current_date"

# ‰ΩøÁî®ÂèçÂºïÂè∑Ôºà‰º†ÁªüÊñπÂºèÔºâ
uptime_info=`uptime`
echo "System uptime: $uptime_info"

# ÂµåÂ•óÂëΩ‰ª§ÊõøÊç¢
backup_file="backup-$(hostname)-$(date +%Y%m%d).tar.gz"
echo "Backup file: $backup_file"

# Âú®ÂáΩÊï∞‰∏≠‰ΩøÁî®
get_disk_usage() {
    local path=$1
    local usage=$(df -h "$path" | awk 'NR==2 {print $5}')
    echo "$usage"
}

echo "Root usage: $(get_disk_usage /)"

## ‚öôÔ∏è Á≥ªÁªüÊìç‰Ωú

### 1. Êñá‰ª∂ÂíåÁõÆÂΩïÊìç‰Ωú

```bash
#!/bin/bash

# ÂàõÂª∫ÁõÆÂΩïÁªìÊûÑ
create_project_structure() {
    local project_name=$1
    mkdir -p "$project_name"/{src,tests,docs,config}
    touch "$project_name"/README.md
    echo "Project $project_name created"
}

# ÊâπÈáèÈáçÂëΩÂêçÊñá‰ª∂
batch_rename() {
    local extension=$1
    local prefix=$2

    counter=1
    for file in *."$extension"; do
        if [ -f "$file" ]; then
            mv "$file" "${prefix}_${counter}.${extension}"
            ((counter++))
        fi
    done
}

# Êü•ÊâæÂ§ßÊñá‰ª∂
find_large_files() {
    local size=${1:-100M}
    local path=${2:-.}

    find "$path" -type f -size +$size -exec ls -lh {} \; | \
    awk '{print $5 " " $9}' | sort -hr
}

# Êñá‰ª∂ÊùÉÈôêÊâπÈáè‰øÆÊîπ
fix_permissions() {
    local dir=$1
    find "$dir" -type d -exec chmod 755 {} \;
    find "$dir" -type f -exec chmod 644 {} \;
    find "$dir" -name "*.sh" -exec chmod +x {} \;
}
```

### 2. ËøõÁ®ãÁÆ°ÁêÜ

```bash
#!/bin/bash

# ËøõÁ®ãÁõëÊéß
monitor_process() {
    local process_name=$1
    local max_memory=${2:-1000000}  # KB

    while true; do
        local pid=$(pgrep "$process_name")
        if [ -n "$pid" ]; then
            local memory=$(ps -o rss= -p "$pid")
            if [ "$memory" -gt "$max_memory" ]; then
                echo "$(date): Process $process_name ($pid) using ${memory}KB memory"
                # ÂèØ‰ª•ÈÄâÊã©ÈáçÂêØËøõÁ®ã
                # kill -9 "$pid"
            fi
        fi
        sleep 60
    done
}

# ÊúçÂä°Áä∂ÊÄÅÊ£ÄÊü•
check_service() {
    local service=$1

    if systemctl is-active --quiet "$service"; then
        echo "‚úÖ $service is running"
        return 0
    else
        echo "‚ùå $service is not running"
        return 1
    fi
}

# ÊâπÈáèÊúçÂä°Ê£ÄÊü•
check_services() {
    local services=("nginx" "mysql" "redis" "docker")

    for service in "${services[@]}"; do
        check_service "$service"
    done
}
```

### 3. ÁΩëÁªúÂ∑•ÂÖ∑

```bash
#!/bin/bash

# Á´ØÂè£Êâ´Êèè
port_scan() {
    local host=$1
    local start_port=${2:-1}
    local end_port=${3:-1000}

    echo "Scanning ports on $host..."
    for ((port=$start_port; port<=$end_port; port++)); do
        if timeout 1 bash -c "echo > /dev/tcp/$host/$port" 2>/dev/null; then
            echo "Port $port is open"
        fi
    done
}

# ÁΩëÁªúËøûÊé•ÁªüËÆ°
network_stats() {
    echo "=== Network Connection Statistics ==="
    echo "ESTABLISHED connections:"
    netstat -an | grep ESTABLISHED | wc -l

    echo "LISTEN ports:"
    netstat -tlnp | grep LISTEN | awk '{print $4}' | sort

    echo "Top connections by IP:"
    netstat -an | grep ESTABLISHED | awk '{print $5}' | \
    cut -d: -f1 | sort | uniq -c | sort -nr | head -10
}

# Â∏¶ÂÆΩÁõëÊéß
bandwidth_monitor() {
    local interface=${1:-eth0}
    local interval=${2:-1}

    while true; do
        local rx_bytes=$(cat /sys/class/net/$interface/statistics/rx_bytes)
        local tx_bytes=$(cat /sys/class/net/$interface/statistics/tx_bytes)

        sleep $interval

        local new_rx=$(cat /sys/class/net/$interface/statistics/rx_bytes)
        local new_tx=$(cat /sys/class/net/$interface/statistics/tx_bytes)

        local rx_rate=$(((new_rx - rx_bytes) / interval))
        local tx_rate=$(((new_tx - tx_bytes) / interval))

        printf "RX: %8s/s TX: %8s/s\n" \
               "$(numfmt --to=iec-i --suffix=B $rx_rate)" \
               "$(numfmt --to=iec-i --suffix=B $tx_rate)"
    done
}
```

## üìä ÊñáÊú¨Â§ÑÁêÜ

### 1. AWK ÁºñÁ®ã

```bash
#!/bin/bash

# AWK Âü∫Á°ÄÁî®Ê≥ï
awk_examples() {
    # ÊâìÂç∞ÁâπÂÆöÂàó
    ps aux | awk '{print $1, $11}'

    # Êù°‰ª∂ËøáÊª§
    awk '$3 > 1.0 {print $1, $3}' /proc/loadavg

    # ËÆ°ÁÆóÁªüËÆ°
    df -h | awk 'NR>1 {gsub(/%/, "", $5); if($5 > 80) print $6, $5"%"}'

    # Â≠óÊÆµÂàÜÈöîÁ¨¶
    awk -F: '{print $1, $3}' /etc/passwd
}

# Êó•ÂøóÂàÜÊûêËÑöÊú¨
analyze_log() {
    local log_file=$1

    echo "=== Log Analysis for $log_file ==="

    # ÊÄªË°åÊï∞
    echo "Total lines: $(wc -l < "$log_file")"

    # ÈîôËØØÁªüËÆ°
    echo "Error count: $(grep -c "ERROR" "$log_file")"

    # IP ËÆøÈóÆÁªüËÆ°
    echo "Top IPs:"
    awk '{print $1}' "$log_file" | sort | uniq -c | sort -nr | head -5

    # Áä∂ÊÄÅÁ†ÅÁªüËÆ°
    echo "Status codes:"
    awk '{print $9}' "$log_file" | sort | uniq -c | sort -nr

    # ËÆøÈóÆÊó∂Èó¥ÂàÜÂ∏É
    echo "Hourly distribution:"
    awk '{print substr($4, 14, 2)}' "$log_file" | sort | uniq -c | sort -k2n
}
```

### 2. SED ÁºñËæëÂô®

```bash
#!/bin/bash

# SED Â∏∏Áî®Êìç‰Ωú
sed_examples() {
    local file="example.txt"

    # ÊõøÊç¢
    sed 's/old/new/g' "$file"                    # ÂÖ®Â±ÄÊõøÊç¢
    sed 's/old/new/2' "$file"                    # ÊõøÊç¢Á¨¨2‰∏™ÂåπÈÖç
    sed '2,5s/old/new/g' "$file"                 # ÊåáÂÆöË°åËåÉÂõ¥

    # Âà†Èô§
    sed '/pattern/d' "$file"                     # Âà†Èô§ÂåÖÂê´Ê®°ÂºèÁöÑË°å
    sed '2,4d' "$file"                           # Âà†Èô§Á¨¨2-4Ë°å
    sed '/^$/d' "$file"                          # Âà†Èô§Á©∫Ë°å

    # ÊèíÂÖ•
    sed '2i\Insert this line' "$file"           # Âú®Á¨¨2Ë°åÂâçÊèíÂÖ•
    sed '2a\Append this line' "$file"           # Âú®Á¨¨2Ë°åÂêéËøΩÂä†

    # ÊâìÂç∞
    sed -n '2,5p' "$file"                       # ÊâìÂç∞Á¨¨2-5Ë°å
    sed -n '/pattern/p' "$file"                 # ÊâìÂç∞ÂåπÈÖçË°å
}

# ÈÖçÁΩÆÊñá‰ª∂Â§ÑÁêÜ
update_config() {
    local config_file=$1
    local key=$2
    local value=$3

    # Â§á‰ªΩÂéüÊñá‰ª∂
    cp "$config_file" "${config_file}.bak"

    # Êõ¥Êñ∞ÈÖçÁΩÆ
    if grep -q "^$key=" "$config_file"; then
        sed -i "s/^$key=.*/$key=$value/" "$config_file"
    else
        echo "$key=$value" >> "$config_file"
    fi
}
```

### 3. Ê≠£ÂàôË°®ËææÂºè

```bash
#!/bin/bash

# Ê≠£ÂàôË°®ËææÂºèÁ§∫‰æã
regex_examples() {
    local text="Contact: john@example.com or call 123-456-7890"

    # ÊèêÂèñÈÇÆÁÆ±
    if [[ $text =~ ([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}) ]]; then
        echo "Email found: ${BASH_REMATCH[1]}"
    fi

    # ÊèêÂèñÁîµËØùÂè∑Á†Å
    if [[ $text =~ ([0-9]{3}-[0-9]{3}-[0-9]{4}) ]]; then
        echo "Phone found: ${BASH_REMATCH[1]}"
    fi

    # È™åËØÅ IP Âú∞ÂùÄ
    validate_ip() {
        local ip=$1
        local regex='^([0-9]{1,3}\.){3}[0-9]{1,3}$'

        if [[ $ip =~ $regex ]]; then
            echo "Valid IP format"
        else
            echo "Invalid IP format"
        fi
    }
}
```

## üõ†Ô∏è Ë∞ÉËØïÂíåÈîôËØØÂ§ÑÁêÜ

### 1. Ë∞ÉËØïÊäÄÂ∑ß

```bash
#!/bin/bash

# ÂêØÁî®Ë∞ÉËØïÊ®°Âºè
set -x    # ÊòæÁ§∫ÊâßË°åÁöÑÂëΩ‰ª§
set -e    # ÈÅáÂà∞ÈîôËØØÁ´ãÂç≥ÈÄÄÂá∫
set -u    # ‰ΩøÁî®Êú™ÂÆö‰πâÂèòÈáèÊó∂Êä•Èîô
set -o pipefail  # ÁÆ°ÈÅì‰∏≠‰ªª‰∏ÄÂëΩ‰ª§Â§±Ë¥•ÈÉΩ‰ºö‰ΩøÊï¥‰∏™ÁÆ°ÈÅìÂ§±Ë¥•

# ÊàñËÄÖ‰ΩøÁî®ÁªÑÂêà
set -euxo pipefail

# Ë∞ÉËØïÂáΩÊï∞
debug() {
    [ "${DEBUG:-0}" = "1" ] && echo "DEBUG: $*" >&2
}

# ‰ΩøÁî®Á§∫‰æã
DEBUG=1 ./script.sh

# ÈîôËØØËøΩË∏™
error_exit() {
    echo "Error: $1" >&2
    echo "Line: $2" >&2
    echo "Function: $3" >&2
    exit 1
}

trap 'error_exit "Command failed" "$LINENO" "${FUNCNAME[0]}"' ERR
```

### 2. ÈîôËØØÂ§ÑÁêÜ

```bash
#!/bin/bash

# ÈîôËØØÂ§ÑÁêÜÊúÄ‰Ω≥ÂÆûË∑µ
safe_execute() {
    local cmd="$1"
    local error_msg="$2"

    if ! eval "$cmd"; then
        echo "Error: $error_msg" >&2
        return 1
    fi
}

# ÈáçËØïÊú∫Âà∂
retry() {
    local max_attempts=$1
    local cmd="$2"
    local attempt=1

    while [ $attempt -le $max_attempts ]; do
        if eval "$cmd"; then
            return 0
        fi
        echo "Attempt $attempt failed, retrying..."
        ((attempt++))
        sleep 1
    done

    echo "Command failed after $max_attempts attempts" >&2
    return 1
}

# Ë∂ÖÊó∂ÊâßË°å
timeout_execute() {
    local timeout=$1
    local cmd="$2"

    timeout "$timeout" bash -c "$cmd"
    local exit_code=$?

    if [ $exit_code -eq 124 ]; then
        echo "Command timed out after $timeout seconds" >&2
    fi

    return $exit_code
}
```

## üîÑ ÂÆûÊàòÈ°πÁõÆ

### 1. Á≥ªÁªüÁõëÊéßËÑöÊú¨

```bash
#!/bin/bash

# Á≥ªÁªüÁõëÊéßËÑöÊú¨
system_monitor() {
    local threshold_cpu=80
    local threshold_memory=80
    local threshold_disk=90
    local log_file="/var/log/system_monitor.log"

    # Êó•ÂøóÂáΩÊï∞
    log_message() {
        echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" >> "$log_file"
    }

    # CPU ÁõëÊéß
    check_cpu() {
        local cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)
        cpu_usage=${cpu_usage%.*}  # ÂèñÊï¥Êï∞ÈÉ®ÂàÜ

        if [ "$cpu_usage" -gt "$threshold_cpu" ]; then
            log_message "WARNING: CPU usage is ${cpu_usage}%"
            return 1
        fi
        return 0
    }

    # ÂÜÖÂ≠òÁõëÊéß
    check_memory() {
        local memory_usage=$(free | grep Mem | awk '{printf("%.0f", $3/$2 * 100.0)}')

        if [ "$memory_usage" -gt "$threshold_memory" ]; then
            log_message "WARNING: Memory usage is ${memory_usage}%"
            return 1
        fi
        return 0
    }

    # Á£ÅÁõòÁõëÊéß
    check_disk() {
        while read output; do
            local usage=$(echo "$output" | awk '{print $5}' | cut -d'%' -f1)
            local partition=$(echo "$output" | awk '{print $6}')

            if [ "$usage" -gt "$threshold_disk" ]; then
                log_message "WARNING: Disk usage on $partition is ${usage}%"
                return 1
            fi
        done <<< "$(df -h | grep -vE '^Filesystem|tmpfs|cdrom')"
        return 0
    }

    # ÊâßË°åÊ£ÄÊü•
    check_cpu
    check_memory
    check_disk

    log_message "System check completed"
}
```

### 2. Ëá™Âä®ÂåñÈÉ®ÁΩ≤ËÑöÊú¨

```bash
#!/bin/bash

# Ëá™Âä®ÂåñÈÉ®ÁΩ≤ËÑöÊú¨
deploy_application() {
    local app_name=$1
    local version=$2
    local environment=${3:-staging}

    # ÈÖçÁΩÆ
    local deploy_dir="/opt/deployments"
    local backup_dir="/opt/backups"
    local service_name="$app_name"

    echo "Starting deployment of $app_name v$version to $environment"

    # Â§á‰ªΩÂΩìÂâçÁâàÊú¨
    backup_current_version() {
        if [ -d "$deploy_dir/$app_name" ]; then
            local timestamp=$(date +%Y%m%d_%H%M%S)
            local backup_path="$backup_dir/${app_name}_${timestamp}"

            echo "Creating backup: $backup_path"
            cp -r "$deploy_dir/$app_name" "$backup_path"
        fi
    }

    # ‰∏ãËΩΩÊñ∞ÁâàÊú¨
    download_version() {
        local download_url="https://releases.company.com/$app_name/$version.tar.gz"
        local temp_dir=$(mktemp -d)

        echo "Downloading $app_name v$version"
        if wget -q "$download_url" -O "$temp_dir/$app_name.tar.gz"; then
            tar -xzf "$temp_dir/$app_name.tar.gz" -C "$temp_dir"
            rm -rf "$deploy_dir/$app_name"
            mv "$temp_dir/$app_name" "$deploy_dir/"
            rm -rf "$temp_dir"
        else
            echo "Failed to download application"
            exit 1
        fi
    }

    # ÂÅ•Â∫∑Ê£ÄÊü•
    health_check() {
        local max_attempts=30
        local attempt=1

        while [ $attempt -le $max_attempts ]; do
            if curl -f -s "http://localhost:8080/health" > /dev/null; then
                echo "Health check passed"
                return 0
            fi
            echo "Health check attempt $attempt failed"
            sleep 2
            ((attempt++))
        done

        echo "Health check failed after $max_attempts attempts"
        return 1
    }

    # ÂõûÊªöÂáΩÊï∞
    rollback() {
        echo "Rolling back to previous version"
        systemctl stop "$service_name"

        local latest_backup=$(ls -t "$backup_dir" | grep "$app_name" | head -1)
        if [ -n "$latest_backup" ]; then
            rm -rf "$deploy_dir/$app_name"
            cp -r "$backup_dir/$latest_backup" "$deploy_dir/$app_name"
            systemctl start "$service_name"
        fi
    }

    # ÊâßË°åÈÉ®ÁΩ≤Ê≠•È™§
    backup_current_version
    systemctl stop "$service_name"
    download_version
    systemctl start "$service_name"

    if health_check; then
        echo "Deployment successful"
    else
        echo "Deployment failed, rolling back"
        rollback
        exit 1
    fi
}
```

### 3. Êó•ÂøóÂàÜÊûêËÑöÊú¨

```bash
#!/bin/bash

# Êó•ÂøóÂàÜÊûêËÑöÊú¨
analyze_access_logs() {
    local log_file=${1:-/var/log/nginx/access.log}
    local output_dir=${2:-./reports}
    local date_filter=${3:-$(date +%d/%b/%Y)}

    mkdir -p "$output_dir"

    echo "Analyzing access logs for $date_filter"

    # ËøáÊª§ÂΩìÂ§©Êó•Âøó
    local filtered_log="$output_dir/filtered_$(date +%Y%m%d).log"
    grep "$date_filter" "$log_file" > "$filtered_log"

    # ÁîüÊàêÊä•Âëä
    generate_report() {
        local report_file="$output_dir/access_report_$(date +%Y%m%d).txt"

        {
            echo "=== Access Log Analysis Report ==="
            echo "Date: $date_filter"
            echo "Generated: $(date)"
            echo

            echo "=== Summary ==="
            echo "Total requests: $(wc -l < "$filtered_log")"
            echo "Unique IPs: $(awk '{print $1}' "$filtered_log" | sort | uniq | wc -l)"
            echo

            echo "=== Top 10 IP Addresses ==="
            awk '{print $1}' "$filtered_log" | sort | uniq -c | sort -nr | head -10
            echo

            echo "=== Top 10 Requested URLs ==="
            awk '{print $7}' "$filtered_log" | sort | uniq -c | sort -nr | head -10
            echo

            echo "=== HTTP Status Codes ==="
            awk '{print $9}' "$filtered_log" | sort | uniq -c | sort -nr
            echo

            echo "=== Hourly Request Distribution ==="
            awk '{print substr($4, 14, 2)}' "$filtered_log" | sort | uniq -c | sort -k2n
            echo

            echo "=== Top User Agents ==="
            awk -F'"' '{print $6}' "$filtered_log" | sort | uniq -c | sort -nr | head -5

        } > "$report_file"

        echo "Report generated: $report_file"
    }

    # Ê£ÄÊµãÂºÇÂ∏∏
    detect_anomalies() {
        echo "=== Anomaly Detection ==="

        # 4xx Âíå 5xx ÈîôËØØ
        local error_count=$(awk '$9 ~ /^[45]/ {count++} END {print count+0}' "$filtered_log")
        echo "HTTP errors (4xx/5xx): $error_count"

        # ÂèØÁñë IPÔºàËØ∑Ê±ÇËøáÂ§öÔºâ
        echo "Suspicious IPs (>1000 requests):"
        awk '{print $1}' "$filtered_log" | sort | uniq -c | awk '$1 > 1000 {print $2, $1}'

        # Â§ßÊñá‰ª∂‰∏ãËΩΩ
        echo "Large responses (>10MB):"
        awk '$10 > 10485760 {print $1, $7, $10}' "$filtered_log"
    }

    generate_report
    detect_anomalies
}
```

## üéì ÊúÄ‰Ω≥ÂÆûË∑µ

### 1. ËÑöÊú¨ËßÑËåÉ

```bash
#!/bin/bash
# Script: example_script.sh
# Description: Example script demonstrating best practices
# Author: Your Name
# Date: 2025-01-04
# Version: 1.0

# ‰∏•Ê†ºÊ®°Âºè
set -euo pipefail

# ÂÖ®Â±ÄÂèòÈáè
readonly SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
readonly SCRIPT_NAME="$(basename "$0")"
readonly LOG_FILE="/var/log/${SCRIPT_NAME%.sh}.log"

# ÂáΩÊï∞ÂøÖÈ°ªÂú®‰ΩøÁî®ÂâçÂÆö‰πâ
usage() {
    cat << EOF
Usage: $SCRIPT_NAME [OPTIONS] COMMAND [ARGS...]

Description:
    Example script demonstrating Shell best practices

Options:
    -h, --help      Show this help message
    -v, --verbose   Enable verbose output
    -d, --debug     Enable debug mode

Commands:
    start           Start the service
    stop            Stop the service
    restart         Restart the service

Examples:
    $SCRIPT_NAME -v start
    $SCRIPT_NAME --debug restart

EOF
}

# Êó•ÂøóÂáΩÊï∞
log() {
    local level=$1
    shift
    echo "$(date '+%Y-%m-%d %H:%M:%S') [$level] $*" | tee -a "$LOG_FILE"
}

# ÈîôËØØÂ§ÑÁêÜ
error_exit() {
    log "ERROR" "$1"
    exit "${2:-1}"
}

# Ê∏ÖÁêÜÂáΩÊï∞
cleanup() {
    log "INFO" "Cleaning up..."
    # Ê∏ÖÁêÜ‰∏¥Êó∂Êñá‰ª∂Á≠â
}

# Ê≥®ÂÜåÊ∏ÖÁêÜÂáΩÊï∞
trap cleanup EXIT
```

### 2. ÂÆâÂÖ®ËÄÉËôë

```bash
#!/bin/bash

# ÂÆâÂÖ®ÁºñÁ®ãÂÆûË∑µ
secure_practices() {
    # È™åËØÅËæìÂÖ•
    validate_input() {
        local input=$1
        local pattern=$2

        if [[ ! $input =~ $pattern ]]; then
            echo "Invalid input: $input"
            return 1
        fi
    }

    # ÂÆâÂÖ®Âú∞Â§ÑÁêÜÁî®Êà∑ËæìÂÖ•
    safe_user_input() {
        local user_input
        read -r user_input

        # ÁßªÈô§ÁâπÊÆäÂ≠óÁ¨¶
        user_input=$(echo "$user_input" | tr -d ';&|`$(){}[]<>')

        # È™åËØÅÈïøÂ∫¶
        if [ ${#user_input} -gt 100 ]; then
            echo "Input too long"
            return 1
        fi

        echo "$user_input"
    }

    # ÂÆâÂÖ®Âú∞ÊâßË°åÂëΩ‰ª§
    safe_execute() {
        local cmd=("$@")

        # ‰ΩøÁî®Êï∞ÁªÑÈÅøÂÖçÂëΩ‰ª§Ê≥®ÂÖ•
        if "${cmd[@]}"; then
            return 0
        else
            echo "Command execution failed"
            return 1
        fi
    }

    # ‰∏¥Êó∂Êñá‰ª∂Â§ÑÁêÜ
    create_temp_file() {
        local temp_file
        temp_file=$(mktemp) || error_exit "Cannot create temp file"

        # ËÆæÁΩÆÂÆâÂÖ®ÊùÉÈôê
        chmod 600 "$temp_file"

        # Ê≥®ÂÜåÊ∏ÖÁêÜ
        trap "rm -f '$temp_file'" EXIT

        echo "$temp_file"
    }
}
```

### 3. ÊÄßËÉΩ‰ºòÂåñ

```bash
#!/bin/bash

# ÊÄßËÉΩ‰ºòÂåñÊäÄÂ∑ß
performance_tips() {
    # ÈÅøÂÖçÈ¢ëÁπÅË∞ÉÁî®Â§ñÈÉ®ÂëΩ‰ª§
    # ÈîôËØØÊñπÂºè
    slow_way() {
        for file in *.txt; do
            if [ -f "$file" ]; then
                echo "Processing $file"
            fi
        done
    }

    # ‰ºòÂåñÊñπÂºè
    fast_way() {
        local files=(*.txt)
        for file in "${files[@]}"; do
            if [ -f "$file" ]; then
                echo "Processing $file"
            fi
        done
    }

    # ‰ΩøÁî®ÂÜÖÁΩÆÂëΩ‰ª§Êõø‰ª£Â§ñÈÉ®ÂëΩ‰ª§
    # Êõø‰ª£ $(date +%s)
    printf -v timestamp '%(%s)T' -1

    # Êõø‰ª£ basename
    filename=${full_path##*/}

    # Êõø‰ª£ dirname
    directory=${full_path%/*}

    # ÊâπÈáèÂ§ÑÁêÜ
    batch_process() {
        local files=()

        # Êî∂ÈõÜÊñá‰ª∂
        while IFS= read -r -d '' file; do
            files+=("$file")
        done < <(find . -name "*.log" -print0)

        # ÊâπÈáèÂ§ÑÁêÜ
        if [ ${#files[@]} -gt 0 ]; then
            gzip "${files[@]}"
        fi
    }
}
```

## üìö ÊÄªÁªì

Shell ËÑöÊú¨ÁºñÁ®ãÊòØÁ≥ªÁªüÁÆ°ÁêÜÂíåËá™Âä®ÂåñÁöÑÈáçË¶ÅÊäÄËÉΩ„ÄÇÊéåÊè°‰ª•‰∏ãË¶ÅÁÇπÔºö

### üéØ Ê†∏ÂøÉË¶ÅÁ¥†
- **ËØ≠Ê≥ïÂü∫Á°Ä**ÔºöÂèòÈáè„ÄÅÊï∞ÁªÑ„ÄÅÊéßÂà∂ÁªìÊûÑ
- **ÂáΩÊï∞ËÆæËÆ°**ÔºöÊ®°ÂùóÂåñÂíåÂ§çÁî®ÊÄß
- **ÈîôËØØÂ§ÑÁêÜ**ÔºöÂÅ•Â£ÆÊÄßÂíåÂÆπÈîôÊÄß
- **ÊñáÊú¨Â§ÑÁêÜ**ÔºöAWK„ÄÅSED„ÄÅÊ≠£ÂàôË°®ËææÂºè

### üõ°Ô∏è ÊúÄ‰Ω≥ÂÆûË∑µ
- **‰ª£Á†ÅËßÑËåÉ**ÔºöÊ≥®Èáä„ÄÅÁº©Ëøõ„ÄÅÂëΩÂêçËßÑËåÉ
- **ÂÆâÂÖ®ÁºñÁ®ã**ÔºöËæìÂÖ•È™åËØÅ„ÄÅÊùÉÈôêÊéßÂà∂
- **ÊÄßËÉΩ‰ºòÂåñ**ÔºöÂáèÂ∞ëÂ§ñÈÉ®Ë∞ÉÁî®„ÄÅÊâπÈáèÂ§ÑÁêÜ
- **Ë∞ÉËØïÊäÄÂ∑ß**Ôºöset ÈÄâÈ°π„ÄÅÊó•ÂøóËÆ∞ÂΩï

### üöÄ ËøõÈò∂ÊñπÂêë
- **Ëá™Âä®ÂåñËøêÁª¥**ÔºöÈÉ®ÁΩ≤„ÄÅÁõëÊéß„ÄÅÂ§á‰ªΩËÑöÊú¨
- **Á≥ªÁªüÈõÜÊàê**Ôºö‰∏éÂÖ∂‰ªñÂ∑•ÂÖ∑ÂíåÁ≥ªÁªüÁöÑÈõÜÊàê
- **‰∫ëÂéüÁîü**ÔºöÂÆπÂô®Âåñ„ÄÅÂæÆÊúçÂä°ÁéØÂ¢ÉËÑöÊú¨
- **DevOps**ÔºöCI/CD ÊµÅÊ∞¥Á∫øËÑöÊú¨

ÈÄöËøá‰∏çÊñ≠ÂÆûË∑µÂíåÂ≠¶‰π†Ôºå‰Ω†Â∞ÜËÉΩÂ§üÁºñÂÜôÂá∫È´òÊïà„ÄÅÂÆâÂÖ®„ÄÅÂèØÁª¥Êä§ÁöÑ Shell ËÑöÊú¨ÔºåÂ§ßÂ§ßÊèêÂçáÂ∑•‰ΩúÊïàÁéáÔºÅ

---

*ÊåÅÁª≠Â≠¶‰π†ÔºåÊåÅÁª≠ÊîπËøõÔºåËÆ© Shell ÁºñÁ®ãÊàê‰∏∫‰Ω†ÁöÑÂæóÂäõÂ∑•ÂÖ∑ÔºÅ* üéâ
```